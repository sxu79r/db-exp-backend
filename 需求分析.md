| 表名             | 描述            | 主键             | 主要外键                                                                          | 主要关系                                 |
|----------------|---------------|----------------|-------------------------------------------------------------------------------|--------------------------------------|
| **Users**      | 存储用户信息        | `user_id`      | 无                                                                             | 一对多 → Posts、Comments、Votes           |
| **Subreddits** | 社区信息          | `subreddit_id` | 无                                                                             | 一对多 → Posts                          |
| **Posts**      | 用户在社区内的帖子     | `post_id`      | `author_id → Users`<br>`subreddit_id → Subreddits`                            | 一对多 → Comments<br>一对多 → Votes（post级） |
| **Comments**   | 帖子的评论（支持嵌套）   | `comment_id`   | `author_id → Users`<br>`post_id → Posts`<br>`parent_comment_id → Comments`    | 一对多（自引用）<br>一对多 → Votes（comment级）    |
| **Votes**      | 记录用户对帖子或评论的投票 | `vote_id`      | `user_id → Users`<br>`post_id → Posts (可为空)`<br>`comment_id → Comments (可为空)` | 多对一 → Users、Posts、Comments           |

| 关系类型         | 表A                  | 表B                                                 | 连接字段                  | 说明 |
|--------------|---------------------|----------------------------------------------------|-----------------------|----|
| 1️⃣ 一对多      | Users → Posts       | `Users.user_id = Posts.author_id`                  | 一个用户可以发多个帖子           |    |
| 2️⃣ 一对多      | Users → Comments    | `Users.user_id = Comments.author_id`               | 一个用户可以写多个评论           |    |
| 3️⃣ 一对多      | Subreddits → Posts  | `Subreddits.subreddit_id = Posts.subreddit_id`     | 一个社区包含多个帖子            |    |
| 4️⃣ 一对多（自引用） | Comments → Comments | `Comments.comment_id = Comments.parent_comment_id` | 评论可以嵌套                |    |
| 5️⃣ 多对一      | Votes → Users       | `Votes.user_id = Users.user_id`                    | 一个用户可以对多个对象投票         |    |
| 6️⃣ 多对一（可选）  | Votes → Posts       | `Votes.post_id = Posts.post_id`                    | 投给帖子（comment_id=NULL） |    |
| 7️⃣ 多对一（可选）  | Votes → Comments    | `Votes.comment_id = Comments.comment_id`           | 投给评论（post_id=NULL）    |    |

````
Users (user_id)
  ├──< Posts (post_id)
  │       └──< Comments (comment_id)
  │               └──< Comments (nested)
  │
  └──< Votes (vote_id)
          ├──→ Posts
          └──→ Comments

Subreddits (subreddit_id)
  └──< Posts

````

| 表名             | 字段                | 类型                       | 备注      |
|----------------|-------------------|--------------------------|---------|
| **Users**      | user_id           | PK                       | 用户唯一标识  |
|                | username          | TEXT                     | 用户名     |
|                | password_hash     | TEXT                     | 密码哈希    |
|                | email             | TEXT                     | 邮箱      |
|                | join_date         | DATETIME                 | 注册时间    |
| **Subreddits** | subreddit_id      | PK                       | 社区ID    |
|                | name              | TEXT                     | 社区名     |
|                | description       | TEXT                     | 介绍      |
|                | creation_date     | DATETIME                 | 创建时间    |
| **Posts**      | post_id           | PK                       | 帖子ID    |
|                | author_id         | FK → Users               | 作者      |
|                | subreddit_id      | FK → Subreddits          | 所属社区    |
|                | title             | TEXT                     | 帖子标题    |
|                | content           | TEXT                     | 帖子内容    |
|                | timestamp         | DATETIME                 | 发布时间    |
| **Comments**   | comment_id        | PK                       | 评论ID    |
|                | author_id         | FK → Users               | 作者      |
|                | post_id           | FK → Posts               | 所属帖子    |
|                | parent_comment_id | FK → Comments (nullable) | 父评论     |
|                | content           | TEXT                     | 评论内容    |
|                | timestamp         | DATETIME                 | 评论时间    |
| **Votes**      | vote_id           | PK                       | 投票ID    |
|                | user_id           | FK → Users               | 投票人     |
|                | post_id           | FK → Posts (nullable)    | 针对帖子    |
|                | comment_id        | FK → Comments (nullable) | 针对评论    |
|                | vote_value        | INT                      | -1 或 +1 |
